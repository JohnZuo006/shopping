<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>用户注册</title>
		<link rel="stylesheet" type="text/css" href="./css/login.css">
		<script src="js/jquery-3.5.1.min.js"></script>
		<script>
			$(function(){
				$(".submit").click(function(){
					let password=$("#password").val()
					let password2=$("#password2").val()
					let username=$("#username").val()
					let telephone=$("#telephone").val()
					let email=$("#email").val()
					let question=$("#question").val()
					let answer=$("#answer").val()
					if(password!=password2)
					{
						$("#msg").text("两次密码输入不相同")
					}
					else{
						$.ajax({
							type:"get",
							data:{"type":"register",
							"username":username,
							"password":password,
							"telephone":telephone,
							"email":email,
							"question":question,
							"answer":answer,
							"role":"user"
							},
							url:"http://localhost:8080/shopping/User",
							dataType:"json",
							success:function(res){
								console.log(res)
								if(res['status']==0)
								{
									console.log("0")
									window.location.href="login.html"
									alert("注册成功，请登录！")
								}
								else{
									$("#msg").text(res.msg)
								}
							},
							error:function(){
								
							},
							xhrFields: {
								withCredentials: true
							}
						})
					}
				})
				
			})
		</script>
	</head>
	<body>
		<form>
		<div class="regist">
			<div class="regist_center">
				<div class="regist_top">
					<div class="left fl">会员注册</div>
					<div class="right fr"><a href="./index.html" target="_self">睿乐购商城</a></div>
					<div class="clear"></div>
					<div class="xian center"></div>
				</div>
				<div class="regist_main center">
					<div class="username">用&nbsp;&nbsp;户&nbsp;&nbsp;名:&nbsp;&nbsp;<input id="username" class="shurukuang" type="text" name="username" placeholder="请输入你的用户名"/><span>请不要输入汉字</span></div>
					<div class="username">密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码:&nbsp;&nbsp;<input id="password" class="shurukuang" type="password" name="password" placeholder="请输入你的密码"/><span>请输入6位以上字符</span></div>
					
					<div class="username">确认密码:&nbsp;&nbsp;<input id="password2" class="shurukuang" type="password" name="repassword" placeholder="请确认你的密码"/><span>两次密码要输入一致哦</span></div>
					<div class="username">手&nbsp;&nbsp;机&nbsp;&nbsp;号:&nbsp;&nbsp;<input id="telephone" class="shurukuang" type="text" name="tel" placeholder="请填写正确的手机号"/><span>填写下手机号吧，方便我们联系您！</span></div>
					<div class="username">电子邮件:&nbsp;&nbsp;<input id="email" class="shurukuang" type="text" name="email" placeholder="请填写正确的email"/><span>填写下email吧，方便接收各种信息！</span></div>
					<div class="username">密保问题:&nbsp;&nbsp;<input id="question" class="shurukuang" type="text" name="question" placeholder="请输入您的密保问题"/><span>输入密保问题和答案，方便找回密码！</span></div>
					<div class="username">密保问题:&nbsp;&nbsp;<input id="answer" class="shurukuang" type="text" name="answer" placeholder="请输入您的密保问题答案"/><span>输入密保问题和答案，方便找回密码！</span></div>
					<div class="username">
						<div class="left fl">验&nbsp;&nbsp;证&nbsp;&nbsp;码:&nbsp;&nbsp;<input class="yanzhengma" type="text" name="username" placeholder="请输入验证码"/></div>
						<div class="right fl"><img src="./image/yanzhengma.jpg"></div>
						<div class="clear"></div>
					</div>
					<div class="username"><p id="msg"></p></div>
				</div>
				<div class="regist_submit">
					<button class="submit" type="button">立即注册</button>
				</div>
				
			</div>
		</div>
		</form>
	</body>
</html>