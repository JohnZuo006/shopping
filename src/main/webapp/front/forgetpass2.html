<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>重设密码</title>
		<link rel="stylesheet" type="text/css" href="./css/login.css">
		<script src="js/jquery-3.5.1.min.js"></script>
		<script>
		$(function(){
			let username=oneValues()
			console.log(username)
		$("#okk").click(function(){
			let new1 = $("#new1").val()
			let new2 = $("#new2").val()
			if(new1==new2){
				$.ajax({
					type:"get",
					data:{
					"type":"findPassword",
					"username":username,
					"newPassword":new1
					},
					url:"http://localhost:8080/shopping/User",
					dataType:"json",
					success:function(res){
						if(res['status']==0){
							alert("找回密码成功,请登录!")
							window.location.href="login.html"
						}else{
							alert("失败")
						}
					},
					error:function(){
						
					},
					xhrFields: {
						withCredentials: true
					}
				})
			}else{
				alert("两次密码输入不一致!")
			}
			})
	    
	  //接收一个值
	    function oneValues(){
	       var result;
	       var url=window.location.search; //获取url中"?"符后的字串  
	       if(url.indexOf("?")!=-1){
	           result = url.substr(url.indexOf("=")+1);
	       }
	       return result;
	    }
		})
		</script>
	</head>
	<body>
		<form>
		<div class="regist">
			<div class="regist_center">
				<div class="regist_top">
					<div class="left fl">重设密码</div>
					<div class="right fr"><a href="./index.html" target="_self">睿乐购商城</a></div>
					<div class="clear"></div>
					<div class="xian center"></div>
				</div>
				<div class="regist_main center">
					<div class="username">新&nbsp;&nbsp;的&nbsp;&nbsp;密&nbsp;&nbsp;码:<input id="new1" class="shurukuang" type="text" name="new1" /></div>
                    <div class="username">再&nbsp;&nbsp;次&nbsp;&nbsp;输&nbsp;&nbsp;入:<input id="new2" class="shurukuang" type="text" name="new2" /></div>
                    <div class="regist_submit">
                             <button class="submit" id="okk" type="button">确认</button>
                       </div>
				</div>
				
			</div>
		</div>
		</form>
	</body>
</html>